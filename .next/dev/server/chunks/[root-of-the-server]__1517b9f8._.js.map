{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/Desktop/i-e-school-admin-panel/lib/storage.ts"],"sourcesContent":["import type { Class, Student, AttendanceRecord } from \"./types\"\r\n\r\n// In-memory data stores\r\nlet classes: Class[] = [\r\n  {\r\n    id: \"1\",\r\n    name: \"Mathematics 101\",\r\n    teacher: \"Dr. Johnson\",\r\n    numberOfStudents: 25,\r\n    description: \"Introduction to Calculus\",\r\n  },\r\n]\r\n\r\nlet students: Student[] = [\r\n  {\r\n    id: \"1\",\r\n    name: \"John Doe\",\r\n    className: \"Mathematics 101\",\r\n    email: \"john@example.com\",\r\n    status: \"Active\",\r\n  },\r\n]\r\n\r\nlet attendance: AttendanceRecord[] = []\r\n\r\nexport const storage = {\r\n  // Classes\r\n  getAllClasses: () => classes,\r\n  \r\n  getClassById: (id: string) => classes.find((c) => c.id === id),\r\n  \r\n  createClass: (classData: Omit<Class, \"id\">) => {\r\n    const newClass = { \r\n      ...classData, \r\n      id: Date.now().toString() \r\n    }\r\n    classes.push(newClass)\r\n    return newClass\r\n  },\r\n  \r\n  deleteClass: (id: string) => {\r\n    const initialLength = classes.length\r\n    classes = classes.filter((c) => c.id !== id)\r\n    return initialLength !== classes.length\r\n  },\r\n\r\n  // Students\r\n  getAllStudents: () => students,\r\n  \r\n  getStudentById: (id: string) => students.find((s) => s.id === id),\r\n  \r\n  createStudent: (studentData: Omit<Student, \"id\">) => {\r\n    const newStudent = { \r\n      ...studentData, \r\n      id: Date.now().toString() \r\n    }\r\n    students.push(newStudent)\r\n    \r\n    // Update class student count\r\n    const studentClass = classes.find((c) => c.name === studentData.className)\r\n    if (studentClass) {\r\n      studentClass.numberOfStudents++\r\n    }\r\n    \r\n    return newStudent\r\n  },\r\n  \r\n  deleteStudent: (id: string) => {\r\n    const student = students.find((s) => s.id === id)\r\n    if (student) {\r\n      const studentClass = classes.find((c) => c.name === student.className)\r\n      if (studentClass) {\r\n        studentClass.numberOfStudents--\r\n      }\r\n    }\r\n    const initialLength = students.length\r\n    students = students.filter((s) => s.id !== id)\r\n    return initialLength !== students.length\r\n  },\r\n\r\n  // Attendance\r\n  getAttendance: (filters?: { className?: string; date?: string }) => {\r\n    let results = attendance\r\n    if (filters?.className) {\r\n      results = results.filter((a) => a.className === filters.className)\r\n    }\r\n    if (filters?.date) {\r\n      results = results.filter((a) => a.date === filters.date)\r\n    }\r\n    return results\r\n  },\r\n  \r\n  saveAttendance: (records: Omit<AttendanceRecord, \"id\">[]) => {\r\n    const newRecords = records.map((r) => ({\r\n      ...r,\r\n      id: `${Date.now()}-${Math.random()}`,\r\n    }))\r\n    attendance.push(...newRecords)\r\n    return newRecords\r\n  },\r\n}"],"names":[],"mappings":";;;;AAEA,wBAAwB;AACxB,IAAI,UAAmB;IACrB;QACE,IAAI;QACJ,MAAM;QACN,SAAS;QACT,kBAAkB;QAClB,aAAa;IACf;CACD;AAED,IAAI,WAAsB;IACxB;QACE,IAAI;QACJ,MAAM;QACN,WAAW;QACX,OAAO;QACP,QAAQ;IACV;CACD;AAED,IAAI,aAAiC,EAAE;AAEhC,MAAM,UAAU;IACrB,UAAU;IACV,eAAe,IAAM;IAErB,cAAc,CAAC,KAAe,QAAQ,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;IAE3D,aAAa,CAAC;QACZ,MAAM,WAAW;YACf,GAAG,SAAS;YACZ,IAAI,KAAK,GAAG,GAAG,QAAQ;QACzB;QACA,QAAQ,IAAI,CAAC;QACb,OAAO;IACT;IAEA,aAAa,CAAC;QACZ,MAAM,gBAAgB,QAAQ,MAAM;QACpC,UAAU,QAAQ,MAAM,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;QACzC,OAAO,kBAAkB,QAAQ,MAAM;IACzC;IAEA,WAAW;IACX,gBAAgB,IAAM;IAEtB,gBAAgB,CAAC,KAAe,SAAS,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;IAE9D,eAAe,CAAC;QACd,MAAM,aAAa;YACjB,GAAG,WAAW;YACd,IAAI,KAAK,GAAG,GAAG,QAAQ;QACzB;QACA,SAAS,IAAI,CAAC;QAEd,6BAA6B;QAC7B,MAAM,eAAe,QAAQ,IAAI,CAAC,CAAC,IAAM,EAAE,IAAI,KAAK,YAAY,SAAS;QACzE,IAAI,cAAc;YAChB,aAAa,gBAAgB;QAC/B;QAEA,OAAO;IACT;IAEA,eAAe,CAAC;QACd,MAAM,UAAU,SAAS,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;QAC9C,IAAI,SAAS;YACX,MAAM,eAAe,QAAQ,IAAI,CAAC,CAAC,IAAM,EAAE,IAAI,KAAK,QAAQ,SAAS;YACrE,IAAI,cAAc;gBAChB,aAAa,gBAAgB;YAC/B;QACF;QACA,MAAM,gBAAgB,SAAS,MAAM;QACrC,WAAW,SAAS,MAAM,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;QAC3C,OAAO,kBAAkB,SAAS,MAAM;IAC1C;IAEA,aAAa;IACb,eAAe,CAAC;QACd,IAAI,UAAU;QACd,IAAI,SAAS,WAAW;YACtB,UAAU,QAAQ,MAAM,CAAC,CAAC,IAAM,EAAE,SAAS,KAAK,QAAQ,SAAS;QACnE;QACA,IAAI,SAAS,MAAM;YACjB,UAAU,QAAQ,MAAM,CAAC,CAAC,IAAM,EAAE,IAAI,KAAK,QAAQ,IAAI;QACzD;QACA,OAAO;IACT;IAEA,gBAAgB,CAAC;QACf,MAAM,aAAa,QAAQ,GAAG,CAAC,CAAC,IAAM,CAAC;gBACrC,GAAG,CAAC;gBACJ,IAAI,GAAG,KAAK,GAAG,GAAG,CAAC,EAAE,KAAK,MAAM,IAAI;YACtC,CAAC;QACD,WAAW,IAAI,IAAI;QACnB,OAAO;IACT;AACF"}},
    {"offset": {"line": 139, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/Desktop/i-e-school-admin-panel/app/api/attendance/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\"\r\nimport { storage } from \"@/lib/storage\"\r\n\r\nexport async function GET(request: Request) {\r\n  try {\r\n    const { searchParams } = new URL(request.url)\r\n    const className = searchParams.get(\"className\") || undefined\r\n    const date = searchParams.get(\"date\") || undefined\r\n\r\n    const attendance = storage.getAttendance({ className, date })\r\n    return NextResponse.json(attendance)\r\n  } catch (error) {\r\n    return NextResponse.json(\r\n      { error: \"Failed to fetch attendance\" },\r\n      { status: 500 }\r\n    )\r\n  }\r\n}\r\n\r\nexport async function POST(request: Request) {\r\n  try {\r\n    const body = await request.json()\r\n\r\n    // Validate input\r\n    if (!body.className || !body.date || !body.records) {\r\n      return NextResponse.json(\r\n        { error: \"className, date, and records are required\" },\r\n        { status: 400 }\r\n      )\r\n    }\r\n\r\n    const records = storage.saveAttendance(body.records)\r\n\r\n    return NextResponse.json({\r\n      success: true,\r\n      message: \"Attendance saved successfully\",\r\n      recordCount: records.length,\r\n    }, { status: 201 })\r\n  } catch (error) {\r\n    return NextResponse.json(\r\n      { error: \"Failed to save attendance\" },\r\n      { status: 500 }\r\n    )\r\n  }\r\n}"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEO,eAAe,IAAI,OAAgB;IACxC,IAAI;QACF,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,QAAQ,GAAG;QAC5C,MAAM,YAAY,aAAa,GAAG,CAAC,gBAAgB;QACnD,MAAM,OAAO,aAAa,GAAG,CAAC,WAAW;QAEzC,MAAM,aAAa,2HAAO,CAAC,aAAa,CAAC;YAAE;YAAW;QAAK;QAC3D,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAA6B,GACtC;YAAE,QAAQ;QAAI;IAElB;AACF;AAEO,eAAe,KAAK,OAAgB;IACzC,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAE/B,iBAAiB;QACjB,IAAI,CAAC,KAAK,SAAS,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,OAAO,EAAE;YAClD,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAA4C,GACrD;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,UAAU,2HAAO,CAAC,cAAc,CAAC,KAAK,OAAO;QAEnD,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,SAAS;YACT,aAAa,QAAQ,MAAM;QAC7B,GAAG;YAAE,QAAQ;QAAI;IACnB,EAAE,OAAO,OAAO;QACd,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAA4B,GACrC;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}